{"version":3,"sources":["athens/devcards/db.cljs"],"mappings":"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","names":["athens.devcards.db/load-real-db!","c__42582__auto__","cljs.core.async.chan","cljs.core.async.impl.dispatch/run","f__42583__auto__","switch__42115__auto__","state_49351","state_val_49353","statearr-49354","inst_49314","inst_49315","inst_49316","cljs.core/PersistentHashMap","inst_49317","cljs.core.async.impl.ioc-helpers/take!","statearr-49355","inst_49347","statearr-49356","statearr-49357","inst_49319","inst_49324","inst_49325","inst_49326","inst_49327","cljs.core/PROTOCOL_SENTINEL","inst_49328","statearr-49361","statearr-49362","inst_49342","inst_49344","inst_49345","statearr-49363","inst_49321","inst_49322","cljs.core/not","statearr-49367","statearr-49369","statearr-49370","inst_49340","inst_49341","cljs.core.get","statearr-49373","statearr-49375","statearr-49377","inst_49337","cljs.core.apply","cljs.core/hash-map","statearr-49378","inst_49335","statearr-49379","statearr-49380","inst_49349","cljs.core.async.impl.ioc-helpers/return-chan","statearr-49385","inst_49332","statearr-49388","statearr-49398","state-machine__42116__auto__","ret-value__42117__auto__","result__42118__auto__","cljs.core/keyword-identical?","ex__42119__auto__","e49401","statearr-49404","cljs.core/seq","statearr-49405","cljs.core/first","state__42584__auto__","statearr-49414","cljs.core.async.impl.ioc-helpers/USER-START-IDX","cljs.core.async.impl.ioc-helpers/run-state-machine-wrapped","cljs_http.client.get","athens.db/athens-url","posh.reagent/transact!","athens.db/dsdb","athens.db/str-to-db-tx","js/alert","athens.devcards.db/load-real-db-button","pressed?","reagent.core.atom","handler","cljs.core.swap_BANG_","cljs.core/deref","athens.views.buttons/button","athens.devcards.db/reset-db-button","datascript.core.reset_conn_BANG_","datascript.core/empty-db","athens.db/schema","devcards.core/register-card","devcards.core/card-base","js/athens","js/athens.devcards","js/athens.devcards.db","js/athens.devcards.db.t_athens$devcards$db49424","athens.devcards.db/t_athens$devcards$db49424","_49426","meta49425","this__47591__auto__","devcard-opts__47592__auto__","cljs.core.assoc","v__47610__auto__","cljs.core/fn?","data-atom__47611__auto__","owner__47612__auto__","reagent.core/as-element","cljs.core.merge","devcards.core/assert-options-map","this__4369__auto__","writer__4370__auto__","opt__4371__auto__","cljs.core/-write","athens.devcards.db/->t_athens$devcards$db49424","js/athens.devcards.db.t_athens$devcards$db49440","athens.devcards.db/t_athens$devcards$db49440","_49442","meta49441","athens.devcards.db/->t_athens$devcards$db49440"],"sourcesContent":["(ns athens.devcards.db\n  (:require\n    [athens.db :as db]\n    [athens.views.buttons :refer [button]]\n    [cljs-http.client :as http]\n    [cljs.core.async :refer [go <!]]\n    [cljsjs.react]\n    [cljsjs.react.dom]\n    [datascript.core :as d]\n    [devcards.core :refer [defcard defcard-rg]]\n    [posh.reagent :refer [transact!]]\n    [reagent.core :as r]))\n\n\n;;; Components\n\n\n(defn load-real-db!\n  []\n  (go\n    (let [res (<! (http/get db/athens-url {:with-credentials? false}))\n          {:keys [success body]} res]\n      (if success\n        (transact! db/dsdb (db/str-to-db-tx body))\n        (js/alert \"Failed to retrieve data from GitHub\")))))\n\n\n(defn load-real-db-button\n  []\n  (let [pressed? (r/atom false)\n        handler (fn []\n                  (swap! pressed? not)\n                  (load-real-db!))]\n    (fn []\n      [button {:disabled @pressed?\n               :on-click handler} \"Load Real Data\"])))\n\n\n(defn reset-db-button\n  []\n  (fn []\n    [button {:on-click #(d/reset-conn! db/dsdb (d/empty-db db/schema))} \"Reset DB\"]))\n\n\n;;; Devcards\n\n\n(defcard-rg Load-Real-DB\n  \"Downloads the ego db. Takes a few seconds. Can only press once.\"\n  [load-real-db-button])\n\n\n(defcard-rg Reset-DB\n  [reset-db-button])\n\n\n(defcard athens-dsdb\n  \"The main Athens dsdb:\"\n  db/dsdb)\n"]}